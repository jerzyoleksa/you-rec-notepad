(this["webpackJsonpnote-app"]=this["webpackJsonpnote-app"]||[]).push([[0],{197:function(t,e,n){"use strict";(function(t){var o=n(22),a=n.n(o),s=n(80),i=n(4),c=n(5),r=n(35),u=n(9),l=n(8),h=n(13),p=n(16),d=n.n(p),g=n(198),f=n.n(g),v=n(79),m=n.n(v),b=n(2),j=function(e){Object(u.a)(h,e);var o=Object(l.a)(h);function h(){var e;return Object(i.a)(this,h),(e=o.call(this)).selectNote=function(t){e.props.choseNote(t)},e.handleSignMessage=function(t,e,n){return new Promise((function(o,a){return n.eth.personal.sign(n.utils.fromUtf8("I am signing my one-time nonce: ".concat(e)),t,(function(e,n){return e?a(e):o({publicAddress:t,signature:n})}))}))},e.updateTitle2=function(t){var e=this.props.prop1;console.log("inside updateTitle:"+t.target.value),e.title=t.target.value,e.value=t.target.value,e.authKey=this.props.authKee,e.name="title",d.a.put("https://frengly.com/ai/notes",e).then((function(t){})).catch((function(t){return console.log("Error updating!!!",t)}))}.bind(Object(r.a)(e)),e.updateTitle=function(t){var n=e.props.prop1;console.log("inside updateTitle:"+t.target.value),n.title=t.target.value,n.value=t.target.value,n.authKey=e.props.authKee,n.name="title",d.a.put("https://frengly.com/ai/notes",n).then((function(t){})).catch((function(t){return console.log("Error updating!!!",t)}))},e.useSignature=function(t,e){console.log(t)},e.menuTab=function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("menuTab:"+n),e.props.updateMeniu(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleLightMode=function(){console.log("changing lights"),e.state.isDark?(document.body.style.backgroundColor="#ecf0f1",document.body.style.color="black"):(document.body.style.backgroundColor="rgb(51,51,51)",document.body.style.color="white"),e.setState({isDark:!e.state.isDark})},e.export=Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("exporting shiit..."),d.a.get("https://frengly.com/ai/export").then((function(t){})).catch((function(t){return console.log("Error!!!",t)}));case 2:case"end":return t.stop()}}),t)}))),e.connectMetamask=Object(s.a)(a.a.mark((function t(){var n,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("connecting metamask1:"+e.props),!window.ethereum){t.next=18;break}return t.prev=2,t.next=5,window.ethereum.request({method:"eth_requestAccounts"});case 5:n=t.sent,console.log("accounts::"+n[0]),o=new f.a(window.ethereum),"Some string 2",e.handleSignMessage(n[0],"Some string 2",o).then(function(t){console.log(t.signature),this.setState({key:t.signature}),this.setState({address:n[0]}),this.props.updateKee(t.signature),this.getNotes()}.bind(Object(r.a)(e)),(function(t){console.log(t)})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),console.log("user did not add account...",t.t0);case 16:t.next=19;break;case 18:alert("No Ethereum interface injected into browser. Read-only access");case 19:case"end":return t.stop()}}),t,null,[[2,13]])}))),e.getNotes=function(){var o=n(520),a="my passphrase",s="my plaintext message",i=(t.from(s),o.encrypt(a,s));o.decrypt(a,i);console.log(i),d.a.post("https://frengly.com/ai/notesSec",{authKey:e.state.key}).then((function(t){var n=t.data,o=n[n.length-1];console.log("lastNote::"+o),e.setState({notesX:n});var a=n.find((function(t){return 1==t.status}));n.length>0&&e.selectNote(a)})).catch((function(t){return console.log("Error!!!",t)}))},e.state={notesX:[],key:"",isDark:!1},e}return Object(c.a)(h,[{key:"componentWillMount",value:function(){this.getNotes()}},{key:"render",value:function(){var t=this,e=this.props,n=e.toggleNote;e.showNote;return Object(b.jsxs)("div",{className:"nav-container",children:[Object(b.jsx)("div",{className:"nav-list",onClick:function(){t.menuTab("current"),n()},children:Object(b.jsx)("span",{class:"material-icons-outlined",children:"create"})}),this.state.key.length>0&&Object(b.jsx)("div",{className:"nav-list",onClick:function(){return t.menuTab("opener")},children:Object(b.jsx)("span",{class:"material-icons-outlined",children:"folder"})}),Object(b.jsx)("div",{className:"nav-list",onClick:function(){return t.toggleLightMode()},children:Object(b.jsx)("span",{class:"material-icons-outlined",children:"wb_sunny"})}),Object(b.jsx)("div",{className:"nav-list",onClick:function(){return t.connectMetamask()},children:Object(b.jsx)("span",{class:"material-icons-outlined",children:"account_circle"})}),Object(b.jsx)("div",{className:"nav-list",onClick:function(){return t.export()},children:Object(b.jsx)("span",{class:"material-icons-outlined",children:"save_alt"})}),this.state.address&&Object(b.jsx)("div",{className:"nav-list",children:Object(b.jsx)("span",{className:this.state.isDark?"btn btn-grayish":"btn",children:this.state.address})}),this.props.prop1.title&&Object(b.jsx)("div",{className:"nav-list",children:Object(b.jsx)(m.a,{innerRef:this.contentEditable,html:this.props.prop1.title,disabled:!1,onChange:this.updateTitle,tagName:"article",className:this.state.isDark?"btn btn-grayish":"btn"})}),this.props.saviStatus&&Object(b.jsx)("div",{className:"nav-list",children:Object(b.jsx)("span",{className:this.state.isDark?"btn btn-grayish":"btn",children:this.props.saviStatus})})]})}}]),h}(h.Component);e.a=j}).call(this,n(1).Buffer)},207:function(t,e,n){},208:function(t,e,n){},238:function(t,e){},248:function(t,e){},266:function(t,e){},268:function(t,e){},285:function(t,e){},350:function(t,e){},352:function(t,e){},385:function(t,e){},391:function(t,e){},433:function(t,e){},451:function(t,e){},521:function(t,e,n){"use strict";n.r(e);var o=n(13),a=n.n(o),s=n(196),i=n.n(s),c=(n(207),n(4)),r=n(5),u=n(9),l=n(8),h=(n(208),n(197)),p=n(2),d=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"renderTags",value:function(t){return t.tags.map((function(t,e){return Object(p.jsx)("span",{className:"note-card-tag",children:t.name},e)}))}},{key:"render",value:function(){var t=this.props,e=t.note,n=t.getNote,o=t.deleteNote;return Object(p.jsxs)("div",{className:"note-card-container",children:[Object(p.jsx)("div",{className:"note-card-title",children:e.title}),Object(p.jsx)("div",{className:"note-card-content",children:e.content}),Object(p.jsx)("div",{className:"note-card-tags",children:this.renderTags(e)}),Object(p.jsx)("span",{className:"note-card-delete",onClick:function(){return o(e.id)},children:Object(p.jsx)("i",{className:"material-icons",children:"close"})}),Object(p.jsx)("span",{className:"note-card-edit",onClick:function(){return n(e.id)},children:Object(p.jsx)("i",{className:"material-icons",children:"mode_edit"})})]})}}]),n}(o.Component),g=(o.Component,o.Component,n(35)),f=n(16),v=n.n(f),m=function(t){return"https://notes-rails-api.herokuapp.com/".concat(t)},b=(n(79),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var o;return Object(c.a)(this,n),(o=e.call(this,t)).updateNote=function(){o.props.updateSaviStatus("saving ...");var t=o.props.prop1;console.log("updating:"+t),console.log("key from parent:"+o.props.authKee),t.authKey=o.props.authKee,t.name="content",t.value=t.content,v.a.put("https://frengly.com/ai/notes",t).then((function(t){o.props.updateSaviStatus("")})).catch((function(t){return console.log("Error updating!!!",t)}))},o.handleChange2=function(t){console.log("handleChange2"),o.setState({html:t.target.value})},o.handleLineFocus=function(t){console.log("focus")},o.state={status:"",value:o.props.prop1.content,typing:!1,typingTimeout:0,html:"<b>Hello <i>World</i></b>"},o.handleChange=o.handleChange.bind(Object(g.a)(o)),o.contentEditable=a.a.createRef(),o}return Object(r.a)(n,[{key:"handleChange",value:function(t){var e=this;this.setState({value:t.target.value}),this.props.updateNoteContent(t.target.value),this.state.typingTimeout&&clearTimeout(this.state.typingTimeout),this.state.typing=!1,this.state.typingTimeout=setTimeout((function(){e.updateNote()}),1500)}},{key:"componentWillReceiveProps",value:function(t){this.setState({value:t.prop1.content})}},{key:"componentDidMount",value:function(){this.nameInput.focus()}},{key:"render",value:function(){var t=this;return Object(p.jsx)("div",{className:"note-textarea-container",children:Object(p.jsx)("textarea",{value:this.state.value,onChange:this.handleChange,ref:function(e){t.nameInput=e}})})}}]),n}(o.Component)),j=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var o;return Object(c.a)(this,n),(o=e.call(this,t)).getNotes=function(){v.a.post("https://frengly.com/ai/notesSec",{authKey:o.props.authKee}).then((function(t){var e=t.data,n=e[e.length-1];console.log("lastNote::"+n),o.setState({notesX:e})})).catch((function(t){return console.log("Error!!!",t)}))},o.updateNote=function(){o.setState({status:"saving ..."});var t=o.props.prop1;console.log("updating:"+t),console.log("key from parent:"+o.props.authKee),t.authKey=o.props.authKee,v.a.put("https://frengly.com/ai/notes",t).then((function(t){o.setState({status:""})})).catch((function(t){return console.log("Error updating!!!",t)}))},o.selectNote=function(t){o.props.choseNote(t),o.props.updateMeniu("current")},o.handleChange2=function(t){console.log("handleChange2"),o.setState({html:t.target.value})},o.handleLineFocus=function(t){console.log("focus")},o.state={key:"",notesX:[],status:"",value:o.props.prop1.content,typing:!1,typingTimeout:0,html:"<b>Hello <i>World</i></b>"},o.handleChange=o.handleChange.bind(Object(g.a)(o)),o.contentEditable=a.a.createRef(),o}return Object(r.a)(n,[{key:"componentWillMount",value:function(){console.log("OPENER - component will mount !!!! "),this.getNotes()}},{key:"handleChange",value:function(t){var e=this;this.setState({value:t.target.value}),this.props.updateNoteContent(t.target.value),this.state.typingTimeout&&clearTimeout(this.state.typingTimeout),this.state.typing=!1,this.state.typingTimeout=setTimeout((function(){e.updateNote()}),1500)}},{key:"componentWillReceiveProps",value:function(t){this.setState({value:t.prop1.content})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this,e=this.state.notesX.map((function(e){return Object(p.jsxs)("div",{onClick:function(){return t.selectNote(e)},children:["\\__ ",e.title,".txt"]},e.id)}));return Object(p.jsx)("div",{className:"note-textarea-container",children:Object(p.jsx)("div",{className:"nav-list",children:e})})}}]),n}(o.Component),N=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=this;setTimeout((function(){t.props.resetError()}),2e3)}},{key:"render",value:function(){var t=this.props.error;return Object(p.jsx)("div",{className:"flash-container",children:t})}}]),n}(o.Component),y=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(c.a)(this,n),(t=e.call(this)).toggleNote=function(){t.setState({showNote:!t.state.showNote,note:{}})},t.updateKey=function(e){console.log("updating key in parent!.."),t.setState({authKey:e})},t.updateNote=function(e){console.log("updating note in parent!.."),t.setState({selectedNote:e})},t.updateNoteTxt=function(e){console.log("updating note content!.."+e),t.state.selectedNote.content=e},t.updateSavStatus=function(e){console.log("updating savingStatys!.."+e),t.setState({savingStatus:e})},t.updateMenu=function(e){"opener"==e&&t.setState({current:!1,opener:!0}),"current"==e&&t.setState({current:!0,opener:!1})},t.drukara=function(){console.log("printing paper...")},t.getNotes=function(){v.a.get(m("notes")).then((function(e){return t.setState({notesX:e.data})})).catch((function(t){return console.log(t.response.data)}))},t.getNote=function(e){v.a.get(m("notes/".concat(e))).then((function(e){return t.setState({note:e.data,showNote:!0})})).catch((function(t){return console.log(t.response.data)}))},t.performSubmissionRequest=function(t,e){return e?v.a.patch(m("notes/".concat(e)),t):v.a.post(m("notes"),t)},t.submitNote=function(e,n){t.performSubmissionRequest(e,n).then((function(e){return t.setState({showNote:!1})})).catch((function(e){var n=e.response.data.errors;n.content?t.setState({error:"Missing Note Content!"}):n.title&&t.setState({error:"Missing Note Title!"})}))},t.deleteNote=function(e){var n=t.state.notes.filter((function(t){return t.id!==e}));v.a.delete(m("notes/".concat(e))).then((function(e){return t.setState({notes:n})})).catch((function(t){return console.log(t.response.data)}))},t.showTagForm=function(){t.setState({newTag:!0})},t.closeTagForm=function(){t.setState({newTag:!1})},t.submitTag=function(e,n){v.a.post(m("notes/".concat(n,"/tags")),e).then((function(e){return t.getNote(n)})).catch((function(e){var n=e.response.data.errors;n.name?t.setState({error:"Missing Tag Name!"}):n.title}))},t.deleteTag=function(e,n){v.a.delete(m("/tags/".concat(n))).then((function(n){return t.getNote(e)})).catch((function(t){return console.log(t.response.body)}))},t.resetError=function(){t.setState({error:""})},t.state={showNote:!1,notesX:[],note:{},newTag:!1,error:"",selectedNote:{content:"Hello from Mars",id:-1},authKey:"",current:!0,opener:!1,savingStatus:"waitin"},t}return Object(r.a)(n,[{key:"render",value:function(){var t=this.state,e=t.showNote,n=(t.notesX,t.note,t.newTag,t.error),o=t.current,a=t.opener;t.savingStatus;return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(h.a,{saviStatus:this.state.savingStatus,updateMeniu:this.updateMenu,toggleNote:this.toggleNote,showNote:e,choseNote:this.updateNote,updateKee:this.updateKey,prop1:this.state.selectedNote}),n&&Object(p.jsx)(N,{error:n,resetError:this.resetError}),o&&Object(p.jsx)(b,{updateSaviStatus:this.updateSavStatus,updateNoteContent:this.updateNoteTxt,prop1:this.state.selectedNote,name:"Jurek",theChosenNote:this.selectedNote,authKee:this.state.authKey}),a&&Object(p.jsx)(j,{updateMeniu:this.updateMenu,updateNoteContent:this.updateNoteTxt,prop1:this.state.selectedNote,name:"Jurek",theChosenNote:this.selectedNote,authKee:this.state.authKey,choseNote:this.updateNote})]})}}]),n}(o.Component),O=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(t){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(t){console.error("Error during service worker registration:",t)}))}i.a.render(Object(p.jsx)(y,{}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");O?function(t){fetch(t).then((function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):k(t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t):k(t)}))}}()}},[[521,1,2]]]);
//# sourceMappingURL=main.5042b75d.chunk.js.map